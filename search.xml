<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Java Used in LeetCode</title>
    <url>/2021/03/02/Java-Used-in-LeetCode/</url>
    <content><![CDATA[<p>记录在LeetCode上刷题过程中遇到的java基础知识</p>
<p><a id="more"></a></p>
<h4 id="java数组">java数组</h4>
<ul>
<li>如何初始化</li>
<li>循环操作</li>
<li>数组长度 length是数组的一个属性。 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray; <span class="comment">// 声明</span></span><br><span class="line"><span class="keyword">int</span>[] intArray2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>]; <span class="comment">//初始化，需要确定数组长度</span></span><br><span class="line"><span class="keyword">int</span> [] intArray2 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;; <span class="comment">// 声明初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span>[] nums)</span></span>&#123; </span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt; nums.length&gt;;i++)&#123; </span><br><span class="line">        sum += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>拷贝 下面的结果是在jshell=11.0.3版本 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int[] a &#x3D; new int[]&#123;1,2,3&#125;; &#x2F;&#x2F;a &#x3D;&#x3D;&gt; int[3] &#123; 1, 2, 3 &#125;</span><br><span class="line">int[] b &#x3D; a; &#x2F;&#x2F;b &#x3D;&#x3D;&gt; int[3] &#123; 1, 2, 3 &#125;</span><br><span class="line">b[0] &#x3D; 4;</span><br><span class="line">a;b; </span><br><span class="line">&#x2F;&#x2F; a&#x3D;&#x3D;&gt; int[3] &#123; 4, 2, 3 &#125; ; a&#x3D;&#x3D;&gt; int[3] &#123; 4, 2, 3 &#125;</span><br></pre></td></tr></table></figure> 上面的是浅拷贝 深度拷贝的简单思路是通过循环实现，在循环里面赋值，这样修改拷贝数组就不会影响原数组（针对对象的实现更加复杂，在这里先考虑基本类型的拷贝）。下面用字符串为例，调用<code>System.arraycopy</code>实现 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> String[] s1 = &#123;<span class="string">&quot;apple&quot;</span>,<span class="string">&quot;banana&quot;</span>&#125;</span><br><span class="line"><span class="comment">// s1 ==&gt; String[2] &#123; &quot;apple&quot;, &quot;banana&quot; &#125;</span></span><br><span class="line"> String[] s2 = <span class="keyword">new</span> String[<span class="number">4</span>];</span><br><span class="line"><span class="comment">//s2 ==&gt; String[4] &#123; null, null, null, null &#125;</span></span><br><span class="line"> System.arraycopy(s1,<span class="number">0</span>,s2,<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">// s2 ==&gt; String[4] &#123; &quot;apple&quot;, &quot;banana&quot;, null, null &#125;</span></span><br><span class="line"> s2[<span class="number">0</span>]=<span class="string">&quot;orange&quot;</span></span><br><span class="line"> s1;s2;</span><br><span class="line"><span class="comment">// s1 ==&gt; String[2] &#123; &quot;apple&quot;, &quot;banana&quot; &#125;</span></span><br><span class="line"><span class="comment">// s2 ==&gt; String[4] &#123; &quot;orange&quot;, &quot;banana&quot;, null, null &#125;</span></span><br></pre></td></tr></table></figure> #### java字符串</li>
<li>长度 <code>length()</code>是java String的方法</li>
<li>子串 <code>substring(int beginIndex, int endIndex);</code>包括beginIndex, 不包括endIndex;</li>
<li>字符 <code>charAt(int index)</code>取指定下标的字符 下标范围：<code>[0, length()-1]</code>, 两边都包括 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String st = <span class="string">&quot;apple&quot;</span></span><br><span class="line">st.length() <span class="comment">// 5</span></span><br><span class="line">st.charAt(<span class="number">0</span>) <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line">st.substring(<span class="number">0</span>,<span class="number">3</span>) <span class="comment">// &quot;app&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="java-hashmap">java HashMap</h4>
<ul>
<li>初始化</li>
<li>K,V取值</li>
<li>遍历 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap; <span class="comment">// 引入 HashMap 类</span></span><br><span class="line">HashMap&lt;Integer, String&gt; fruit = <span class="keyword">new</span> HashMap&lt;Integer, String&gt;();</span><br><span class="line">fruit.put(<span class="number">1</span>, <span class="string">&quot;apple&quot;</span>);</span><br><span class="line">fruit.put(<span class="number">2</span>, <span class="string">&quot;orange&quot;</span>);</span><br><span class="line">fruit.put(<span class="number">3</span>, <span class="string">&quot;banana&quot;</span>);</span><br><span class="line"><span class="comment">//  fruit ==&gt; &#123;1=apple, 2=orange, 3=banana&#125;</span></span><br><span class="line">fruit.put(<span class="number">3</span>, <span class="string">&quot;bus&quot;</span>);</span><br><span class="line"><span class="comment">// fruit ==&gt; &#123;1=apple, 2=orange, 3=bus&#125;</span></span><br><span class="line">fruit.replace(<span class="number">3</span>,<span class="string">&quot;bus&quot;</span>, <span class="string">&quot;banana&quot;</span>)</span><br><span class="line"><span class="comment">// fruit ==&gt; &#123;1=apple, 2=orange, 3=banana&#125;</span></span><br><span class="line">fruit.get(<span class="number">1</span>); <span class="comment">// &quot;apple&quot;</span></span><br><span class="line">fruit.containsKey(<span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">////  for each</span></span><br><span class="line"><span class="keyword">for</span> (Integer i : fruit.keySet()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;key: &quot;</span> + i + <span class="string">&quot; value: &quot;</span> + fruit.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode 1-5 </title>
    <url>/2021/03/02/LeetCode-1-5/</url>
    <content><![CDATA[<p>LeetCode 1-5题的算法记录 最长回文子串，寻找两个正序数组的中位数，无重复字符的最长子串，两数相加，两数之和 <a id="more"></a></p>
<h3 id="基本知识">基本知识</h3>
<p>java 1.8.0 java基础知识（数组）和Collections</p>
<h3 id="总结与收获">总结与收获</h3>
<ul>
<li><p>java的基础知识 java中的基础知识，主要是指数组操作（创建数组，复制数组等），集合操作（HashMap的初始化和查找），循环操作 基础的数据结构是数组，主要要掌握的数组的循环操作。</p></li>
<li><p>双指针方法解决部分问题 今天的题目基本上都可以找到<span class="math inline">\(O(n^2)\)</span>的暴力法解决，这类问题的主要方法就是通过两个指针的移动来完成条件的查找，也是其他的解决问题的基础。</p></li>
</ul>
<h3 id="两数之和">1. 两数之和</h3>
<p><a href="https://leetcode-cn.com/problems/two-sum/">LeetCode 题目描述</a> #### 暴力法,双指针 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">int</span>[] result_index = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">boolean</span> succeed = <span class="keyword">false</span>;</span><br><span class="line">        <span class="comment">// O(n^2)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length &amp;&amp; !succeed;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;nums.length &amp;&amp; !succeed; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i] + nums[j] == target)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i != j)&#123;</span><br><span class="line">                        succeed = <span class="keyword">true</span>;</span><br><span class="line">                        result_index[<span class="number">0</span>] = i&gt;j?j:i;</span><br><span class="line">                        result_index[<span class="number">1</span>] = i&gt;j?i:j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result_index;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="hashmap方法">HashMap方法</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] result_index = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// hash</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; htmp = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="comment">// init map</span></span><br><span class="line">        <span class="comment">// k: nums[i], v: i, index of target-nums[i] in nums;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(htmp.containsKey( target-nums[i]))&#123;</span><br><span class="line">                result_index[<span class="number">0</span>] = htmp.get(target-nums[i]);</span><br><span class="line">                result_index[<span class="number">1</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            htmp.put(nums[i], i); <span class="comment">// put here to prevent resue the i</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result_index;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="两数相加">2. 两数相加</h3>
<p><a href="https://leetcode-cn.com/problems/add-two-numbers/">[LeetCode 题目描述]</a> 细节问题，尤其是链表的操作（头插法和尾插法） #### 按位计算, 短的补0 参考<a href="https://leetcode-cn.com/problems/add-two-numbers/solution/2-liang-shu-xiang-jia-javamo-ni-by-maczh-7wpr/"></a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        ListNode res = <span class="keyword">null</span>;</span><br><span class="line">        ListNode head = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// 尾插法</span></span><br><span class="line">        <span class="keyword">int</span> cap = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l1 != <span class="keyword">null</span> || l2 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> l1_val = l1!=<span class="keyword">null</span> ?  l1.val : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> l2_val = l2!=<span class="keyword">null</span> ?  l2.val : <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">            sum = l1_val+l2_val+cap;</span><br><span class="line">            cap = sum/<span class="number">10</span>;</span><br><span class="line">            ListNode t = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            <span class="keyword">if</span>(res == <span class="keyword">null</span>)&#123;</span><br><span class="line">                res = t;</span><br><span class="line">                head = t;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                res.next = t;</span><br><span class="line">                res = res.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(l1!=<span class="keyword">null</span>)&#123; l1=l1.next;&#125;</span><br><span class="line">            <span class="keyword">if</span>(l2!=<span class="keyword">null</span>)&#123; l2=l2.next;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cap</span></span><br><span class="line">        <span class="keyword">if</span>(cap != <span class="number">0</span>)&#123;</span><br><span class="line">            res.next =  <span class="keyword">new</span> ListNode(cap);</span><br><span class="line">            res = res.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="无重复字符的最长子串">3. 无重复字符的最长子串</h3>
<p><a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/description/">[LeetCode 题目描述]</a> 细节问题，尤其是链表的操作（头插法和尾插法） #### 暴力，双指针 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">int</span> maxSubStringLength=<span class="number">0</span>;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;s.length(); j++)&#123;</span><br><span class="line">                <span class="comment">// check if has repeat char</span></span><br><span class="line">                <span class="keyword">if</span>( hasRepeatChar(s,i,j))&#123;</span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                maxSubStringLength = j-i+<span class="number">1</span> &gt; maxSubStringLength ?</span><br><span class="line">                                     j-i+<span class="number">1</span>: maxSubStringLength;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxSubStringLength;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasRepeatChar</span><span class="params">(String s, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="comment">// include start and end</span></span><br><span class="line">        <span class="keyword">boolean</span>[] check_char_flag = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">128</span>];</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;=end;i++)&#123;</span><br><span class="line">            c = s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (check_char_flag[c]==<span class="keyword">true</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            check_char_flag[c] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="寻找两个正序数组的中位数">4. 寻找两个正序数组的中位数</h3>
<p><a href="https://leetcode-cn.com/problems/median-of-two-sorted-arrays/description/">LeetCode 题目描述</a> 对比了官网给的算法（提前结束）发现没有明显的性能提升，所以这里就完整采用两步的方法来操作，不采用取前第k小的值的算法来提前结束算法。 #### 暴力, 先合并 然后计算中位数 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// merge</span></span><br><span class="line">        <span class="keyword">int</span> [] merge_nums = <span class="keyword">new</span> <span class="keyword">int</span>[nums1.length+nums2.length]; </span><br><span class="line">        <span class="keyword">int</span> merge_length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(nums1.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> findMedianSortedArrays(nums2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nums2.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> findMedianSortedArrays(nums1);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;nums1.length &amp;&amp; j&lt;nums2.length )&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums1[i] &lt; nums2[j])&#123; </span><br><span class="line">                merge_nums[merge_length]=nums1[i]; </span><br><span class="line">                merge_length++;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                merge_nums[merge_length]=nums2[j]; </span><br><span class="line">                merge_length++;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;nums1.length)&#123;merge_nums[merge_length] = nums1[i]; merge_length++;i++;&#125;</span><br><span class="line">        <span class="keyword">while</span>(j&lt;nums2.length)&#123;merge_nums[merge_length] = nums2[j]; merge_length++;j++;&#125;</span><br><span class="line">        <span class="keyword">return</span> findMedianSortedArrays(merge_nums);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums1.length%<span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> (nums1[(nums1.length/<span class="number">2</span>)-<span class="number">1</span>] + nums1[nums1.length/<span class="number">2</span>]) * <span class="number">0.5</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> nums1[nums1.length/<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 5. 最长回文子串 <a href="https://leetcode-cn.com/problems/longest-palindromic-substring/description/">LeetCode 题目描述</a> #### 暴力，双指针 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> beginIndex=<span class="number">0</span>,endIndex=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">           </span><br><span class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> j = i + endIndex-beginIndex; j&lt;s.length(); j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(checkPalindromeSubString(s,i,j))&#123;</span><br><span class="line">                    <span class="keyword">if</span>( j-i &gt; endIndex-beginIndex)&#123;</span><br><span class="line">                        beginIndex=i;endIndex=j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="keyword">return</span> s.substring(beginIndex,endIndex+<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkPalindromeSubString</span><span class="params">(String s, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123; </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> lc = s.charAt(i);</span><br><span class="line">        <span class="keyword">char</span> rc = s.charAt(j);</span><br><span class="line">        <span class="keyword">while</span>(lc == rc)&#123;</span><br><span class="line">            i++;</span><br><span class="line">            j--;</span><br><span class="line">            <span class="keyword">if</span> (i&gt;=j)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            lc = s.charAt(i);</span><br><span class="line">            rc = s.charAt(j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="中心扩展">中心扩展</h4>
<p>参考 <a href="https://leetcode-cn.com/problems/longest-palindromic-substring/solution/zui-chang-hui-wen-zi-chuan-by-leetcode-solution/">LeetCode 官方题解</a> <a href="https://github.com/labuladong/fucking-algorithm/blob/master/%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E7%B3%BB%E5%88%97/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2.md">labuladong github</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        String res = s.substring(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">           String st = palindrome(s, i, i);</span><br><span class="line">           <span class="keyword">if</span>(st.length() &gt; res.length())&#123;</span><br><span class="line">               res = st;</span><br><span class="line">           &#125;</span><br><span class="line">           st = palindrome(s, i, i+<span class="number">1</span>);</span><br><span class="line">           <span class="keyword">if</span> (st.length() &gt; res.length())&#123;</span><br><span class="line">               res = st;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">palindrome</span><span class="params">(String s, <span class="keyword">int</span> beginIndex, <span class="keyword">int</span> endIndex)</span></span>&#123;</span><br><span class="line">        <span class="comment">// middle expand</span></span><br><span class="line">        <span class="keyword">while</span>( beginIndex&gt;=<span class="number">0</span> &amp;&amp; endIndex &lt; s.length() &amp;&amp; s.charAt(beginIndex) == s.charAt(endIndex))&#123;</span><br><span class="line">            beginIndex--; endIndex++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substring(beginIndex+<span class="number">1</span>, endIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode 6-7 </title>
    <url>/2021/03/03/LeetCode-6-7/</url>
    <content><![CDATA[<p>LeetCode 6-7题的算法记录 Z 字形变换 整数反转 <a id="more"></a></p>
<h3 id="总结与收获">总结与收获</h3>
<p>java基础知识更加熟悉但是算法问题还是没有解决思路。 仍然需要努力。 今天的问题LeetCode给的难度等级不高，但是参考了解析之后做起来还是很吃力，而且中间针对边界值问题处理很吃力，花费了很长的时间检查程序解决Bug。 - 数字处理技巧 整型数字按位读取方法 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// int x = 123;</span></span><br><span class="line"><span class="keyword">while</span>(x!=<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">int</span> pop = x % <span class="number">10</span>;<span class="comment">// 每一位，从右向左, 依次是3,2,1</span></span><br><span class="line">    x  = x/<span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="z-字形变换">6. Z 字形变换</h3>
<p><a href="https://leetcode-cn.com/problems/zigzag-conversion/description/">LeetCode 题目描述</a></p>
<p>#### 暴力法 建立矩阵然后从按列读变成按行读</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(numRows == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder(s.length());</span><br><span class="line">        <span class="comment">// init matrix, index-&gt; r,c</span></span><br><span class="line">        <span class="keyword">int</span> paired_size = (numRows-<span class="number">1</span>) * <span class="number">2</span>; <span class="comment">//V size</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">char</span>[][] matrix = <span class="keyword">new</span> <span class="keyword">char</span>[numRows][(s.length()/paired_size + <span class="number">1</span>)*(numRows-<span class="number">1</span>)];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> r=<span class="number">0</span>,c=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> paired_length = i / paired_size;</span><br><span class="line">            <span class="keyword">int</span> left_length = i-paired_size*paired_length;</span><br><span class="line">            <span class="comment">// |</span></span><br><span class="line">            <span class="keyword">if</span>(left_length &lt; numRows)&#123;</span><br><span class="line">                r = left_length;</span><br><span class="line">                c = paired_length * (numRows-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// /</span></span><br><span class="line">            <span class="keyword">if</span>(left_length&gt;numRows)&#123;</span><br><span class="line">                r = paired_size - left_length;</span><br><span class="line">                c = paired_length * (numRows-<span class="number">1</span>) + left_length-numRows;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(left_length == numRows)&#123;</span><br><span class="line">                r = paired_size -left_length;</span><br><span class="line">                c = paired_length * (numRows-<span class="number">1</span>) +<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            matrix[r][c] = s.charAt(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// r,c -&gt; index</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> r=<span class="number">0</span>;r&lt; matrix.length;r++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> c=<span class="number">0</span>;c&lt; matrix[<span class="number">0</span>].length;c++)&#123;</span><br><span class="line">                 <span class="keyword">if</span>( matrix[r][c] != <span class="string">&#x27;\0&#x27;</span>)&#123;</span><br><span class="line">                      sb.append(matrix[r][c]);</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="暴力法-去除矩阵操作转为行拼接">暴力法 去除矩阵操作，转为行拼接</h4>
<p>参考 <a href="https://leetcode-cn.com/problems/zigzag-conversion/solution/z-zi-xing-bian-huan-by-leetcode/">LeetCode 官方题解</a>对比猜测上面矩阵的循环花费的时间很长（index-&gt;r,c 是<span class="math inline">\(O(s.length())\)</span>的时间复杂度，r,c -&gt; index是<span class="math inline">\(O(m*n)\)</span>的时间复杂度，矩阵中有很多空元素，所以<span class="math inline">\(m*n\)</span>远大于<span class="math inline">\(s.length()\)</span>）参考官方的解法，将中间的表示从矩阵转换为行数组，降低时间花费。后来通过验证发现确实提高了速度。 <img src="https://gitee.com/chenryi/image_for_notes/raw/master/20210303221907.png" alt="LeetCode 时间花费对比" /> 第二行采用矩阵形式，运行时间为45ms，第一行是采用行数组的形式，运行时间8ms，提高了很多。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(numRows == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder(s.length());</span><br><span class="line">        List&lt;StringBuilder&gt; sbs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numRows; i++)&#123;</span><br><span class="line">            sbs.add(<span class="keyword">new</span> StringBuilder());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// init matrix, index-&gt; r,c</span></span><br><span class="line">        <span class="keyword">int</span> paired_size = (numRows-<span class="number">1</span>) * <span class="number">2</span>; <span class="comment">//V size</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//char[][] matrix = new char[numRows][(s.length()/paired_size + 1)*(numRows-1)];</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> r=<span class="number">0</span>,c=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> paired_length = i / paired_size;</span><br><span class="line">            <span class="keyword">int</span> left_length = i-paired_size*paired_length;</span><br><span class="line">            <span class="comment">// |</span></span><br><span class="line">            <span class="keyword">if</span>(left_length &lt; numRows)&#123;</span><br><span class="line">                r = left_length;</span><br><span class="line">                c = paired_length * (numRows-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// /</span></span><br><span class="line">            <span class="keyword">if</span>(left_length&gt;numRows)&#123;</span><br><span class="line">                r = paired_size - left_length;</span><br><span class="line">                c = paired_length * (numRows-<span class="number">1</span>) + left_length-numRows;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(left_length == numRows)&#123;</span><br><span class="line">                r = paired_size -left_length;</span><br><span class="line">                c = paired_length * (numRows-<span class="number">1</span>) +<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//  matrix[r][c] = s.charAt(i);</span></span><br><span class="line">            sbs.get(r).append(s.charAt(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(StringBuilder ts: sbs)&#123;</span><br><span class="line">            sb.append(ts);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="整数反转">7. 整数反转</h3>
<p><a href="https://leetcode-cn.com/problems/reverse-integer/description/">LeetCode 题目描述</a></p>
<p>参考 <a href="https://leetcode-cn.com/problems/reverse-integer/solution/zheng-shu-fan-zhuan-by-leetcode/">LeetCode 官方题解</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// split</span></span><br><span class="line">        <span class="keyword">while</span>(x!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// overflow</span></span><br><span class="line">            <span class="keyword">if</span>(result &gt; Integer.MAX_VALUE/<span class="number">10</span> || (result == Integer.MAX_VALUE/<span class="number">10</span> &amp;&amp; x/<span class="number">10</span> &gt; <span class="number">7</span>))&#123; result=<span class="number">0</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line">            <span class="keyword">if</span>(result &lt; Integer.MIN_VALUE/<span class="number">10</span> || (result == Integer.MIN_VALUE/<span class="number">10</span> &amp;&amp; x/<span class="number">10</span> &lt;-<span class="number">8</span>))&#123; result=<span class="number">0</span>; <span class="keyword">break</span>;&#125;</span><br><span class="line"></span><br><span class="line">            result = result * <span class="number">10</span> + x%<span class="number">10</span>;</span><br><span class="line">            x  = x/<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/08/18/hello-world/</url>
    <content><![CDATA[<p>Hello word for Hexo. <a id="more"></a> Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start">Quick Start</h2>
<h3 id="create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>LeetCode 8-9 </title>
    <url>/2021/03/05/LeetCode-8-9/</url>
    <content><![CDATA[<p>LeetCode 8-9题的算法记录 Z 字形变换 回文数 <a id="more"></a></p>
<h3 id="总结与收获">总结与收获</h3>
<p>难度等级不高，但是容易出现Bug，第8题的中间没有详细考虑各种情况，没有建立状态机，考虑过程中比较简单，在提交过程中遇到了问题后还要耐心查找问题，可以考虑使用题解中的状态机的算法来解决问题，来减少出错。</p>
<h3 id="字符串转换整数-atoi">8. 字符串转换整数 (atoi)</h3>
<p><a href="https://leetcode-cn.com/problems/string-to-integer-atoi/">LeetCode 题目描述</a></p>
<h4 id="暴力法-分步解决">暴力法 分步解决</h4>
<p>按照描述，将问题分两步解决，1)找到合法数字（如果有）的字符串 2)将字符串转换为数字，初步尝试可以得到下面的程序。 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span> positive = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> pos_char_num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> beginIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> endIndex = s.length();</span><br><span class="line">        <span class="comment">// skip ahead space</span></span><br><span class="line">        <span class="keyword">while</span>(beginIndex&lt;s.length() &amp;&amp; s.charAt(beginIndex)==<span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">            beginIndex++;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(beginIndex&gt;=s.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// get num range </span></span><br><span class="line">        <span class="comment">// legal number</span></span><br><span class="line">        <span class="comment">// +/-...  ...</span></span><br><span class="line">        <span class="keyword">if</span>(s.charAt(beginIndex) == <span class="string">&#x27;+&#x27;</span>)&#123;</span><br><span class="line">            positive = <span class="keyword">true</span>;</span><br><span class="line">            beginIndex++;</span><br><span class="line">            endIndex = beginIndex;</span><br><span class="line">            <span class="keyword">while</span>(endIndex&lt;s.length() &amp;&amp; s.charAt(endIndex) &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s.charAt(endIndex)&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                endIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(beginIndex)==<span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">            positive = <span class="keyword">false</span>;</span><br><span class="line">            beginIndex++;</span><br><span class="line">            endIndex = beginIndex;</span><br><span class="line">            <span class="keyword">while</span>(endIndex&lt;s.length() &amp;&amp; s.charAt(endIndex) &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s.charAt(endIndex)&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                endIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(beginIndex) &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s.charAt(beginIndex)&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">            endIndex = beginIndex;</span><br><span class="line">            <span class="keyword">while</span>(endIndex&lt;s.length() &amp;&amp; s.charAt(endIndex) &gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; s.charAt(endIndex)&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                endIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=beginIndex;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(c &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; c &lt;=<span class="string">&#x27;9&#x27;</span>)&#123; <span class="comment">// number</span></span><br><span class="line">                <span class="comment">// check overflow</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;  <span class="comment">// other char</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// convert str to int</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=beginIndex;i&lt;endIndex;i++)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(c &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; c &lt;=<span class="string">&#x27;9&#x27;</span>)&#123; <span class="comment">// number</span></span><br><span class="line">                <span class="comment">// check overflow</span></span><br><span class="line">                <span class="keyword">if</span>(positive)&#123;</span><br><span class="line">                    <span class="keyword">if</span>( result &gt; Integer.MAX_VALUE/<span class="number">10</span> || result == Integer.MAX_VALUE/<span class="number">10</span> &amp;&amp; c-<span class="string">&#x27;0&#x27;</span> &gt; <span class="number">7</span>)&#123;</span><br><span class="line">                        result = Integer.MAX_VALUE; <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>( -result &lt; Integer.MIN_VALUE/<span class="number">10</span> || -result == Integer.MIN_VALUE/<span class="number">10</span> &amp;&amp; c-<span class="string">&#x27;0&#x27;</span> &gt; <span class="number">8</span>)&#123;</span><br><span class="line">                        result = Integer.MIN_VALUE; <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                result = result * <span class="number">10</span> + c - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> positive? result: -result ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="暴力法-双指针">暴力法 双指针</h4>
<p>再思考上面的程序，发现解决问题的思路不够清楚，上面的代码是在解决bug的过程中逐步调整得到的。仔细思考上面的算法，发现核心就是找到合法的数字字符串，后面就是将字符串转换为整数。找到合法的数字字符串这一步用双指针的算法解决，通过设置两个指针来标记开始和结尾。同时将<code>charAt</code>函数调用转化为<code>char[]</code>数组操作，应该也能提高一点性能。 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">char</span>[] cs = s.toCharArray();</span><br><span class="line">        <span class="keyword">boolean</span> positive = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> pos_char_num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> beginIndex = <span class="number">0</span>; <span class="comment">// skip space</span></span><br><span class="line">        <span class="keyword">int</span> endIndex = <span class="number">0</span>; <span class="comment">// skip space, skip &#x27;+&#x27;,&#x27;-&#x27;,0-9 </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;cs.length;i++)&#123;</span><br><span class="line">            <span class="comment">// beginIndex ++</span></span><br><span class="line">           </span><br><span class="line">            <span class="keyword">if</span>(cs[i]==<span class="string">&#x27; &#x27;</span> &amp;&amp; beginIndex==endIndex)&#123; <span class="comment">// skip ahead space</span></span><br><span class="line">                beginIndex++;endIndex++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(cs[i]==<span class="string">&#x27;+&#x27;</span> &amp;&amp; beginIndex==endIndex)&#123;</span><br><span class="line">                positive = <span class="keyword">true</span>;</span><br><span class="line">                endIndex++;<span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(cs[i]==<span class="string">&#x27;-&#x27;</span>  &amp;&amp; beginIndex==endIndex)&#123;</span><br><span class="line">                positive = <span class="keyword">false</span>;</span><br><span class="line">                endIndex++;<span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(cs[i]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; cs[i]&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                endIndex++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(beginIndex &gt;=cs.length)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// all space</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cs[beginIndex]==<span class="string">&#x27;+&#x27;</span> || cs[beginIndex]==<span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">            beginIndex++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// convert str to int</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=beginIndex;i&lt;endIndex;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cs[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; cs[i] &lt;=<span class="string">&#x27;9&#x27;</span>)&#123; <span class="comment">// number</span></span><br><span class="line">                <span class="comment">// check overflow</span></span><br><span class="line">                <span class="keyword">if</span>(positive)&#123;</span><br><span class="line">                    <span class="keyword">if</span>( result &gt; Integer.MAX_VALUE/<span class="number">10</span> || result == Integer.MAX_VALUE/<span class="number">10</span> &amp;&amp; cs[i]-<span class="string">&#x27;0&#x27;</span> &gt; <span class="number">7</span>)&#123;</span><br><span class="line">                        result = Integer.MAX_VALUE; <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>( -result &lt; Integer.MIN_VALUE/<span class="number">10</span> || -result == Integer.MIN_VALUE/<span class="number">10</span> &amp;&amp; cs[i]-<span class="string">&#x27;0&#x27;</span> &gt; <span class="number">8</span>)&#123;</span><br><span class="line">                        result = Integer.MIN_VALUE; <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                result = result * <span class="number">10</span> + cs[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> positive? result: -result ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="回文数">9 回文数</h3>
<p><a href="https://leetcode-cn.com/problems/palindrome-number/">LeetCode 题目描述</a></p>
<p>简单的思路就是将数字先转化为字符串然后转化为字符串的回文判断问题。再简化一下，可以将数字转化为整形数组，数组元素是输入数的每位的数，按照这种思路可以得到下面的程序。 #### 暴力法 按位检查 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] x_i = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];<span class="comment">//&#123;-1,-1,-1,-1,-1,-1,-1,-1,-1,-1&#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// split to each char</span></span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> p = x % <span class="number">10</span>;</span><br><span class="line">            x_i[length] = p;</span><br><span class="line">            length++;</span><br><span class="line">            x = x/<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length/<span class="number">2</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(x_i[i] != x_i[length-i-<span class="number">1</span>])&#123;</span><br><span class="line">                flag = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo和GitHub Pages 搭建个人博客</title>
    <url>/2020/08/18/hexo-github-blog/</url>
    <content><![CDATA[<p>在github上搭建博客的过程的记录。</p>
<p><a id="more"></a></p>
<h2 id="环境说明">环境说明</h2>
<ul>
<li>git 官网：<a href="https://git-scm.com/">https://git-scm.com/</a></li>
<li>node 官网：<a href="http://nodejs.cn/">http://nodejs.cn/</a> 下载的方法见官网链接，在此就不多说了。其中git可以选择github客户端等而不是命令行。 建议通过镜像网站下载软件，否则下载速度非常慢，可以考虑<a href="https://npm.taobao.org/mirrors/">淘宝镜像</a>。 系统：windows 10</li>
</ul>
<h2 id="步骤">步骤</h2>
<ol type="1">
<li><p>注册github账号 因为使用github提供的 GitHub Pages 服务，所以需要先注册github账号，如果已有可以跳过这部分内容， 如果没有账号的话，可以通过邮箱在github官网上注册账号。</p></li>
<li><p>配置github SSH key 使用的hexo是通过git来将文件传递到github仓库中的，为了避免每次提交的时候都要验证身份（输入邮箱密码），通过配置sshkey来偷懒，非必须。具体步骤如下： 2.1 生成key 运行命令 ssh-keygen, （git安装后自带的程序）,全部默认，会在用户目录的.ssh目录（隐藏文件夹）下生成 id_rsa, id_rsa.pub文件， 打开id_rsa.pub就是后面需要的key 2.2 保存到github账户中 登录github账号，选择：setting --&gt; SSH and GPG keys，选择"new ssh key"，然后将id_rsa.pub的内容复制到“key”文本框中，保存。</p></li>
<li><p>GitHub Pages使用 将GitHub Pages作为一个静态网站托管平台，能够方便别人的访问，同时利用git来管理自己的博客内容。 3.1 创建仓库 创建 github公开仓库，仓库名称为 <code>&lt;用户名&gt;.github.io</code>，选择带有Readme.md 3.2 打开GitHub Pages服务 在浏览器中打开建立的仓库，选择仓库的setting --&gt; options，然后选择 GitHub Pages，（这里 GitHub Pages在页面的底部，不是另一个页面），选择branch为master，保存。当提示<code>Your site is published at ...</code> 时说明成功。打开上面的链接，就能够看到Readme.md的相关内容。 3.3 使用 到这里，就利用GitHub Pages建立了一个静态网页，我们可以通过在这个仓库中手动增加静态网页的方式来完成内容的展示，但是非常麻烦，所以下面介绍Hexo这一博客框架来简化操作。</p></li>
<li><p>Hexo使用 Hexo的官网是<a href="https://hexo.io/zh-cn/index.html">hexo.io</a>，是一个博客框架。主要特点是插件丰富，功能足够。主要用到的功能有： 自动部署，在本地写Markdown文件，然后通过简单的一行命令就能够转换为html文件并且部署到githubpages中。之后再结合相关的设置和插件来修改界面外观等。 4.1 安装 建议使用镜像网站，比如：<a href="https://developer.aliyun.com/mirror/NPM?from=tnpm">淘宝镜像</a> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure> 4.2 使用 hexo常用命令有：<code>generate, deploy, server, new</code>等，可以参考官网来找到更多的命令。 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd your_project # 进入一个空文件夹，作为项目的根目录</span><br><span class="line">hexo init #初始化，生成模板文件和代码</span><br><span class="line">npm install # 安装依赖的包</span><br></pre></td></tr></table></figure> 上面就建立成功了一个博客网站的demo，可以通过<code>hexo g</code>, <code>hexo s</code>,在本地部署来看一下网站的效果。</p>
<p>4.3 写博客 每次写博客并且生成静态网页的命令如下： <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd your_project</span><br><span class="line">hexo new &quot;this blog name&quot;</span><br><span class="line">hexo g # 生成</span><br></pre></td></tr></table></figure></p>
<p>4.4 部署 上面完成了本地的部署，下面的任务就是将这个部署改为在GitHub Pages上部署。 安装部署的工具包<code>hexo-deployer-git</code> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd you_project</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure> 修改hexo配置，将部署改为git。将<code>&lt;you_project&gt;/_config.yml</code>文件最后的内容参考如下内容修改： <figure class="highlight text"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: &lt;repository url&gt; #git@github.com:chenruyi/chenruyi.github.io.git</span><br><span class="line">  branch: [branch] #master</span><br></pre></td></tr></table></figure> 每次写完博客之后，通过<code>hexo clean</code>,<code>hexo deploy</code>命令来更新并部署内容。</p></li>
<li><p>继续美化 现在的博客已经完成了主要的部分，还可以继续美化。。。。。</p></li>
<li><p>下面记录一些常见到修改和配置（不定期更新）</p></li>
</ol>
<ul>
<li>设置首页不显示全文，只显示摘要 采用的方法是使用<code>&lt;!-- more --&gt;</code>标签，在<code>---</code>（后一个）和<code>&lt;!-- more --&gt;</code>之间的内容是摘要，在首页上显示，并且自动添加<code>Read More</code>跳转到博客内容页面，注意的是这部分摘要在这篇blog中也会出现。 使用方法：正常写blog中的内容，并且在开头增加一个摘要部分。</li>
</ul>
]]></content>
      <tags>
        <tag>git</tag>
        <tag>hexo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>java base input/output</title>
    <url>/2020/11/04/java-base-20-11-04/</url>
    <content><![CDATA[<p>java 的基础知识，java的输入输出的操作 <a id="more"></a></p>
<h2 id="输入输出">输入输出</h2>
<p>在这里，主要是指命令行的输入和输出的处理，包括：1. 输入参数 2. 命令行处理程序 参考：</p>
<p><a href="https://www.runoob.com/java/java-files-io.html">菜鸟教程</a> <a href="https://www.runoob.com/java/java-scanner-class.html">菜鸟教程</a></p>
<h3 id="输入参数处理">输入参数处理</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(String arg: args)&#123;</span><br><span class="line">        System.out.println(arg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上所示，针对所有的输入参数可以按照这种方法来依次读入然后处理。</p>
<h3 id="命令行输入">命令行输入</h3>
<p>在命令行中输入的处理是比较麻烦的，主要的采用<code>BufferedReader, Scanner</code>两个类来读入输入的字符然后处理。 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="comment">// 使用 System.in 创建 BufferedReader</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        <span class="comment">// 输出提示信息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;输入字符, 按下 &#x27;q&#x27; 键退出。&quot;</span>);</span><br><span class="line">        <span class="comment">// 循环读取，直到输入&#x27;q&#x27;</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            c = (<span class="keyword">char</span>) br.read();</span><br><span class="line">            System.out.println(c);</span><br><span class="line">        &#125; <span class="keyword">while</span> (c != <span class="string">&#x27;q&#x27;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure> 上面的程序会一直读取输入然后输出 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> (scan.hasNextDouble()) &#123;</span><br><span class="line">        <span class="keyword">double</span> x = scan.nextDouble();</span><br><span class="line">        m = m + <span class="number">1</span>;</span><br><span class="line">        sum = sum + x;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    System.out.println(m + <span class="string">&quot;个数的和为&quot;</span> + sum);</span><br><span class="line">    System.out.println(m + <span class="string">&quot;个数的平均值是&quot;</span> + (sum / m));</span><br><span class="line">    scan.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 建议采用第二种方法，采用<code>Scanner</code>类来完成输入和输出的处理，一方面是Scanner类提供了一些类型转换的方法，比如上面所示的<code>nextDouble</code>能够将输入转换为指定类型。当然实际上java的命令行的输入还是比较少的。</p>
<h3 id="命令行处理程序">命令行处理程序</h3>
<p>以ls为例，在java中如何实现这个功能（部分实现）。 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LSDemo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String path=<span class="keyword">null</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入查询的目录:&quot;</span>);</span><br><span class="line">        Scanner scan=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        path=scan.nextLine();</span><br><span class="line">        File dir = <span class="keyword">new</span> File(path);</span><br><span class="line">        String[] child = dir.list();</span><br><span class="line">        <span class="keyword">if</span>(child == <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;目录为空&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(String dirName: child)&#123;</span><br><span class="line">                System.out.println(dirName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 编译运行 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -version </span><br><span class="line">&#x2F;&#x2F; openjdk version &quot;9-internal&quot;</span><br><span class="line">javac LSDemo.java</span><br><span class="line">java LSDemo</span><br></pre></td></tr></table></figure> 得到结果（部分截图） <img src="https://gitee.com/chenryi/image_for_notes/raw/master/20210305224508.png" alt="Ubuntun openjdk9绝对路径测试结果" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/20210305224701.png" alt="Ubuntun openjdk9相对路径测试结果" /></p>
<h2 id="文件操作">文件操作</h2>
<p>文本文件的读写操作，常见的几种读写方法，推荐使用<code>BuffredReader,BufferedWriter</code> 注意的是要注意处理<code>IOException</code>。 另外，需要注意的是关于编码问题，基于字符和buf的方法有额外的参数可以实现特定的文件编码处理。</p>
<h3 id="fileinputstreamfileoutputstream">FileInputStream,FileOutputStream</h3>
<p>字节读写 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// should import java.io.* packages.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RW1</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(filePath);</span><br><span class="line">    fos.write(<span class="string">&quot;FileOutputStream output methods.&quot;</span>.getBytes());</span><br><span class="line">    fos.close();</span><br><span class="line">    <span class="comment">// read</span></span><br><span class="line">    FileInputStream fis =<span class="keyword">new</span> FileInputStream(filePath);</span><br><span class="line">    <span class="keyword">byte</span>[] bys = bew <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">while</span>(file.read(bys,<span class="number">0</span>m bys.length)!=-<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">// convert byte to string.</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(bys));</span><br><span class="line">    &#125;</span><br><span class="line">    fis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="filewriterfilereader">FileWriter,FileReader</h3>
<p>字符读写 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// should import java.io.* packages.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RW2</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write</span></span><br><span class="line">    FileWriter writer = <span class="keyword">new</span> FileWriter(filePath);</span><br><span class="line">    writer.write(<span class="string">&quot;FileWriter output methods.&quot;</span>.getBytes());</span><br><span class="line">    writer.close();</span><br><span class="line">    <span class="comment">// read, using try with </span></span><br><span class="line">    <span class="keyword">try</span>(FileReader reader = <span class="keyword">new</span> FileReader(filePath))&#123;</span><br><span class="line">        <span class="keyword">int</span> c;</span><br><span class="line">        <span class="keyword">while</span>((c = reader.read() != -<span class="number">1</span>))&#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>) c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="buffredreaderbufferedwriter">BuffredReader,BufferedWriter</h3>
<p>字符按行读写 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// should import java.io.* packages.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RW3</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write</span></span><br><span class="line">    FileWriter writer = <span class="keyword">new</span> FileWriter(filePath);</span><br><span class="line">    BufferedWriter bufWriter = <span class="keyword">new</span> BufferedWriter(writer);</span><br><span class="line">    bufWriter.write(<span class="string">&quot;BufferWriter write methods.&quot;</span>);</span><br><span class="line">    bufWriter.close();</span><br><span class="line">    <span class="comment">// read</span></span><br><span class="line">   <span class="keyword">try</span>(BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(filePath));) &#123;</span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">while</span> ((str = in.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></p>
<h3 id="练习题">练习题</h3>
<p><a href="https://docs.oracle.com/javase/tutorial/essential/io/QandE/questions.html">Oracle java tutorial</a></p>
<p>参考: <a href="https://docs.oracle.com/javase/tutorial/essential/io/QandE/CountLetter.java">oracle CountLetter</a></p>
]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>java mysql redis ubuntu install</title>
    <url>/2021/03/06/java-mysql-redis-ubuntu-install/</url>
    <content><![CDATA[<p>Ubuntu 20.04 java开发部署环境配置，主要是 java11, mysql, redis的安装和配置. <a id="more"></a></p>
<h3 id="java">java</h3>
<p>jdk版本: openjdk11 安装命令 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt install openjdk-11-jre-headless</span><br></pre></td></tr></table></figure> 安装后使用helloworld.java检测环境配置 &gt; 注意的是java 11提供了<a href="https://openjdk.java.net/jeps/330">JEP 330: Launch Single-File Source-Code Programs</a>使用单个命令来运行.java文件。 &gt; 源代码在内存中编译，然后由解释器执行，而不需要在磁盘上生成.class 文件了。但是，该特性仅限于保存在单个源文件中的代码。不能在同一个运行编译中添加其他源文件。为了满足这个限制，所有的类都必须在同一个文件中定义，不过它对文件中类的数量没有限制，并且类既可声明为公共类，也可以不是，因为只要它们在同一个源文件中就没关系。源文件中声明的第一个类将被提取出来作为主类，我们应该将 main 方法放在第一个类中。所以类的顺序很重要。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -version</span><br><span class="line">java HelloWorld.java &#x2F;&#x2F; if using jdk8: javac HelloWorld.java; java HelloWorld;</span><br></pre></td></tr></table></figure>
<p>结果截图 <img src="https://gitee.com/chenryi/image_for_notes/raw/master/20210306221844.png" alt="Java HelloWorld" /></p>
<h3 id="mysql">mysql</h3>
<p>参考<a href="https://www.itcoder.tech/posts/how-to-install-mysql-on-ubuntu-20-04/?spm=a2c4e.10696291.0.0.6b6419a4epAPfn">ITCoder</a> 安装mysql，运行下面的命令 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt install mysql-server</span><br></pre></td></tr></table></figure> 检查mysql是否成功启动 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo systemctl status mysql</span><br></pre></td></tr></table></figure> 截图如下 <img src="https://gitee.com/chenryi/image_for_notes/raw/master/20210306222652.png" alt="mysql status" /></p>
<p>mysql 简单配置 运行mysql_secure_installation（安装mysql时也会安装） <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure> 上面的命令会提示设置密码验证策略和设置root用户的密码。 为了能够通过java来访问数据库，采用增加一个专门用来完成数据库的访问的用户。具体的操作如下。 首先进入mysql shell 执行环境（运行<code>mysql -u root -p</code>命令） <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 增加用户</span><br><span class="line">CREATE USER &#39;test&#39;@&#39;%&#39; IDENTIFIED BY &#39;1234&#39;; </span><br><span class="line">&#x2F;&#x2F; 用户名:test 密码:1234(示例，需要符合之前设置的密码验证策略), &#39;%&#39;指任意电脑能够远程登录，&#39;localhost&#39;:只能本地登录</span><br><span class="line">&#x2F;&#x2F;修改权限</span><br><span class="line">&#x2F;&#x2F; 模板: grant 权限 on 数据库对象 to 用户</span><br><span class="line">grant all on *.* to &#39;test&#39;@&#39;%&#39;; </span><br></pre></td></tr></table></figure> ### redis 参考<a href="https://developer.aliyun.com/article/645910">阿里云开发社区</a> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 安装redis服务</span><br><span class="line">sudo apt install redis-server</span><br></pre></td></tr></table></figure> 测试是否安装成功 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 检查是否启动redis服务，运行下面命令，应该提示端口被占用</span><br><span class="line">redis-server</span><br><span class="line">ps -aux | grep redis</span><br></pre></td></tr></table></figure> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/20210306225149.png" alt="成功启动" /></p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>linux</tag>
        <tag>mysql</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>jitsi-meeting视频会议简单部署记录</title>
    <url>/2020/09/27/jitsi-meeting-install/</url>
    <content><![CDATA[<p>jitsi-meeting视频会议的服务器端的部署记录 <a id="more"></a></p>
<h2 id="jitsi-meeting视频会议部署">jitsi-meeting视频会议部署</h2>
<p>最近看到了jitsi-meeting视频会议的开源软件，提供了web的测试链接，试了一下，功能比较齐全，所以想尝试一下部署到自己的服务器上。搜到了几篇博客，但是部分的内容已经过时了，修改的配置文件的位置都发生了改变，部署过程中遇到了不少坑，所以记录下来。</p>
<h3 id="jitsi-meeting介绍">jitsi-meeting介绍</h3>
<p>jitsi-meeting是一个开源 （Apache） WebRTC JavaScript 应用程序，它使用<a href="https://github.com/jitsi/jitsi-videobridge">jitsi-videobridge</a>提供高质量、安全和可扩展的视频会议。 jitsi-meeting 前端可以在浏览器中运行，无需在额外安装。官网测试地址：<a href="https://meet.jit.si">https://meet.jit.si</a>。jitsi-meeting支持共享屏幕和窗口等操作。并且提供了安卓和ios的测试客户端。 详细介绍可以参考： 官网: <a href="https://jitsi.org/">https://jitsi.org/</a> github: <a href="https://github.com/jitsi/jitsi-meet">https://github.com/jitsi/jitsi-meet</a></p>
<p>官网上提供了3种安装方法，包括基于 Debian 的系统(Ubuntun)包管理器（apt）安装，Docker安装和源码安装，为了简单起见，在这里先进行apt安装，其他的方法等之后有时间再尝试。 官方提供部署和安装方法见：<a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-quickstart">jitsi.github.io</a>，主要的安装配置说明都是从这里复制得到的。</p>
<h3 id="环境准备">环境准备</h3>
<ul>
<li>Ubuntun 16.04 服务器 在这里我使用的是阿里云服务器，也可以使用其他的云服务器，主要需要的条件是：公网ip，这样才能使用公网的ip来进入会议，如果没有只能在局域网内容进行测试。并且需要管理员权限。</li>
</ul>
<p>使用了阿里云服务器之后要开启相关的端口的访问权限，注意的是这是需要在阿里云的安全组规则管理界面进行设置的（在浏览器中）。需要开放的端口是：<code>80/tcp,443/tcp,4443/tcp,10000/udp</code>配置截图：</p>
<figure>
<img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_18-11-31.png" alt="80,443,4443,10000" /><figcaption aria-hidden="true">80,443,4443,10000</figcaption>
</figure>
<h3 id="部署步骤">部署步骤</h3>
<p>下面的安装过程一般都是需要管理员权限的，使用<code>root</code>用户或者在命令前增加<code>sudo</code>命令。 1. 安装nginx <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install -y nginx</span><br></pre></td></tr></table></figure> 检查nginx的情况 <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeeting-Snipaste_2020-09-27_15-31-04.png" alt="nginx成功启动" /></p>
<ol start="2" type="1">
<li><p>防火墙配置 使用<code>ufw</code>管理防火墙。 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ufw allow 80/tcp</span><br><span class="line">sudo ufw allow 443/tcp</span><br><span class="line">sudo ufw allow 4443/tcp</span><br><span class="line">sudo ufw allow 10000/udp</span><br><span class="line">sudo ufw allow 22/tcp</span><br><span class="line">sudo ufw enable</span><br></pre></td></tr></table></figure> 配置成功检查命令 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ufw status verbose</span><br></pre></td></tr></table></figure> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeeting-Snipaste_2020-09-27_15-36-57.png" alt="配置结果" /></p></li>
<li><p>安装jitsi-meeting 使用apt安装已经打包好的文件，主要的步骤是增加jitsimeeting的源，然后安装。 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://download.jitsi.org/jitsi-key.gpg.key | sudo sh -c &#x27;gpg --dearmor &gt; /usr/share/keyrings/jitsi-keyring.gpg&#x27;</span><br><span class="line">echo &#x27;deb [signed-by=/usr/share/keyrings/jitsi-keyring.gpg] https://download.jitsi.org stable/&#x27; | sudo tee /etc/apt/sources.list.d/jitsi-stable.list &gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> update all package sources</span></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeeting-Snipaste_2020-09-27_15-52-20.png" alt="apt update中显示有jitsimeeting源" /> 开始安装jitsimeeting，注意的是网络比较慢，中间经过多次的中断和重试，最后下载完成依赖并且等待输入<code>y</code>确认安装，输入公网ip地址然后等待完成。 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install jitsi-meet</span><br></pre></td></tr></table></figure> 注意： 安装过程中需要输入服务器的地址可以是ip或者是域名等，在这里我用的是ip地址，在后续踩坑过程中没有找到修改ip地址的配置文件，所以输入的时候需要注意。 <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeeting-Snipaste_2020-09-27_16-03-52.png" alt="安装过程1" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-05-39.png" alt="输入ip" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-06-22.png" alt="ssl验证" /></p></li>
<li><p>修改配置文件 配置文件的修改原理主要是配置nginx。 官方的部署指南中说是自动配置的，但是我按照上面的步骤安装完成之后没有成功（访问ip之后没有进入会议界面），所以进行下面的修改，如果成功了可能不需要下面的配置。 检查出错的原因： <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 列出全部的jitmeeting启动的service</span></span><br><span class="line">systemctl | grep ji</span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查状态</span></span><br><span class="line">systemctl status jitsi-videobridge2.service</span><br><span class="line">systemctl status jicofo.service</span><br><span class="line"><span class="meta">#</span><span class="bash"> nginx状态</span></span><br><span class="line">systemctl status nginx.service</span><br></pre></td></tr></table></figure> 结果如下所示： <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-19-27.png" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-25-07.png" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-25-35.png" /></p></li>
</ol>
<p>从nginx的报错信息得到出错的原因是：安装的nginx不支持TLSv1.3，配置文件<code>/etc/nginx/sites-enabled/47.103.0.122.conf</code>有问题。 修改如下： 将<code>/etc/nginx/sites-enabled/47.103.0.122.conf</code>中的<code>ssl_protocols</code>的值修改为 <code>TLSv1.1和TLSv1.2</code> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-39-56.png" alt="配置文件修改" /> 然后重启nginx得到成功结果： <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl stop nginx.service</span><br><span class="line">sudo systemctl start nginx.service</span><br><span class="line">sudo systemctl status nginx.service</span><br></pre></td></tr></table></figure> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-47-50.png" alt="nginx启动成功" /> 通过浏览器访问 <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-57-02.png" alt="Firefox提示安全问题" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_16-58-56.png" alt="Chrome提示安全问题" /> 选择高级，同意风险并且继续（继续前往不安全的链接）可以进入首页。 可以创建会议并且其他的人也能够通过ip地址来加入会议，到这里部署就算成功了。</p>
<p>成功运行的测试截图： <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_17-01-26.png" alt="首页" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_17-02-22.png" alt="会议界面（关闭摄像头）" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_17-44-28.png" alt="分享窗口" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_17-45-09.png" alt="设置密码" /> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/jitsimeetingSnipaste_2020-09-27_17-46-00.png" alt="分享链接" /></p>
<p>其中关于安全问题的提示可以考虑参考<a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-quickstart#generate-a-lets-encrypt-certificate-optional-recommended">generate-a-lets-encrypt-certificate-optional-recommended</a>来解决。</p>
<p>另外，如果没有找到相关的配置文件，可以通过复制<code>/usr/share/jitsi-meet-web-config/jitsi-meet.example</code>到<code>/etc/nginx/conf.d/jitsi-meet-ip.conf</code>，并修改配置文件的内容来完成。 修改内容： - 修改<code>ssl_protocols</code>的值为 <code>TLSv1.1和TLSv1.2</code> - 将配置文件中出现的<code>jitsi-meet.example.com</code>修改为ip地址，下面以<code>111.111.111.111</code>为例，包括<code>ssl_certificate，ssl_certificate_key</code>的值。</p>
<p>完整的修改结果如下所示。 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server_names_hash_bucket_size 64;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line">    server_name 111.111.111.111;</span><br><span class="line"></span><br><span class="line">    location ^~ &#x2F;.well-known&#x2F;acme-challenge&#x2F; &#123;</span><br><span class="line">       default_type &quot;text&#x2F;plain&quot;;</span><br><span class="line">       root         &#x2F;usr&#x2F;share&#x2F;jitsi-meet;</span><br><span class="line">    &#125;</span><br><span class="line">    location &#x3D; &#x2F;.well-known&#x2F;acme-challenge&#x2F; &#123;</span><br><span class="line">       return 404;</span><br><span class="line">    &#125;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">       return 301 https:&#x2F;&#x2F;$host$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    listen [::]:443 ssl;</span><br><span class="line">    server_name 111.111.111.111;</span><br><span class="line"></span><br><span class="line"># Mozilla Guideline v5.4, nginx 1.17.7, OpenSSL 1.1.1d, intermediate configuration</span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;</span><br><span class="line">    ssl_prefer_server_ciphers off;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout 1d;</span><br><span class="line">    ssl_session_cache shared:SSL:10m;  # about 40000 sessions</span><br><span class="line">    ssl_session_tickets off;</span><br><span class="line"></span><br><span class="line">    add_header Strict-Transport-Security &quot;max-age&#x3D;63072000&quot; always;</span><br><span class="line"></span><br><span class="line">    ssl_certificate &#x2F;etc&#x2F;prosody&#x2F;certs&#x2F;111.111.111.111.crt;</span><br><span class="line">    ssl_certificate_key &#x2F;etc&#x2F;prosody&#x2F;certs&#x2F;111.111.111.111.key;</span><br><span class="line"></span><br><span class="line">    root &#x2F;usr&#x2F;share&#x2F;jitsi-meet;</span><br><span class="line"></span><br><span class="line">    # ssi on with javascript for multidomain variables in config.js</span><br><span class="line">    ssi on;</span><br><span class="line">    ssi_types application&#x2F;x-javascript application&#x2F;javascript;</span><br><span class="line"></span><br><span class="line">    index index.html index.htm;</span><br><span class="line">    error_page 404 &#x2F;static&#x2F;404.html;</span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_types text&#x2F;plain text&#x2F;css application&#x2F;javascript application&#x2F;json image&#x2F;x-icon application&#x2F;octet-stream application&#x2F;wasm;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    gzip_proxied no-cache no-store private expired auth;</span><br><span class="line">    gzip_min_length 512;</span><br><span class="line"></span><br><span class="line">    location &#x3D; &#x2F;config.js &#123;</span><br><span class="line">        alias &#x2F;etc&#x2F;jitsi&#x2F;meet&#x2F;111.111.111.111-config.js;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x3D; &#x2F;external_api.js &#123;</span><br><span class="line">        alias &#x2F;usr&#x2F;share&#x2F;jitsi-meet&#x2F;libs&#x2F;external_api.min.js;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #ensure all static content can always be found first</span><br><span class="line">    location ~ ^&#x2F;(libs|css|static|images|fonts|lang|sounds|connection_optimization|.well-known)&#x2F;(.*)$</span><br><span class="line">    &#123;</span><br><span class="line">        add_header &#39;Access-Control-Allow-Origin&#39; &#39;*&#39;;</span><br><span class="line">        alias &#x2F;usr&#x2F;share&#x2F;jitsi-meet&#x2F;$1&#x2F;$2;</span><br><span class="line"></span><br><span class="line">        # cache all versioned files</span><br><span class="line">        if ($arg_v) &#123;</span><br><span class="line">          expires 1y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # BOSH</span><br><span class="line">    location &#x3D; &#x2F;http-bind &#123;</span><br><span class="line">        proxy_pass      http:&#x2F;&#x2F;localhost:5280&#x2F;http-bind;</span><br><span class="line">        proxy_set_header X-Forwarded-For $remote_addr;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # xmpp websockets</span><br><span class="line">    location &#x3D; &#x2F;xmpp-websocket &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;127.0.0.1:5280&#x2F;xmpp-websocket?prefix&#x3D;$prefix&amp;$args;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        tcp_nodelay on;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ ^&#x2F;([^&#x2F;?&amp;:&#39;&quot;]+)$ &#123;</span><br><span class="line">        try_files $uri @root_path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location @root_path &#123;</span><br><span class="line">        rewrite ^&#x2F;(.*)$ &#x2F; break;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ ^&#x2F;([^&#x2F;?&amp;:&#39;&quot;]+)&#x2F;config.js$</span><br><span class="line">    &#123;</span><br><span class="line">       set $subdomain &quot;$1.&quot;;</span><br><span class="line">       set $subdir &quot;$1&#x2F;&quot;;</span><br><span class="line"></span><br><span class="line">       alias &#x2F;etc&#x2F;jitsi&#x2F;meet&#x2F;111.111.111.111-config.js;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #Anything that didn&#39;t match above, and isn&#39;t a real file, assume it&#39;s a room name and redirect to &#x2F;</span><br><span class="line">    location ~ ^&#x2F;([^&#x2F;?&amp;:&#39;&quot;]+)&#x2F;(.*)$ &#123;</span><br><span class="line">        set $subdomain &quot;$1.&quot;;</span><br><span class="line">        set $subdir &quot;$1&#x2F;&quot;;</span><br><span class="line">        rewrite ^&#x2F;([^&#x2F;?&amp;:&#39;&quot;]+)&#x2F;(.*)$ &#x2F;$2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # BOSH for subdomains</span><br><span class="line">    location ~ ^&#x2F;([^&#x2F;?&amp;:&#39;&quot;]+)&#x2F;http-bind &#123;</span><br><span class="line">        set $subdomain &quot;$1.&quot;;</span><br><span class="line">        set $subdir &quot;$1&#x2F;&quot;;</span><br><span class="line">        set $prefix &quot;$1&quot;;</span><br><span class="line"></span><br><span class="line">        rewrite ^&#x2F;(.*)$ &#x2F;http-bind;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # websockets for subdomains</span><br><span class="line">    location ~ ^&#x2F;([^&#x2F;?&amp;:&#39;&quot;]+)&#x2F;xmpp-websocket &#123;</span><br><span class="line">        set $subdomain &quot;$1.&quot;;</span><br><span class="line">        set $subdir &quot;$1&#x2F;&quot;;</span><br><span class="line">        set $prefix &quot;$1&quot;;</span><br><span class="line"></span><br><span class="line">        rewrite ^&#x2F;(.*)$ &#x2F;xmpp-websocket;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="踩坑记录">踩坑记录</h3>
<ol type="1">
<li><p>完全卸载jitsi-meeting 因为中间出现过问题，考虑过卸载重装，尝试过一次，但是之后安装过程中没有出现输入ip的界面，而且没有自动完成配置文件，所以尝试来全部删除，然后按照上面的方法来完成部署。 jitsi-meeting的卸载 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get purge jigasi jitsi-meet jitsi-meet-web-config jitsi-meet-prosody jitsi-meet-turnserver jitsi-meet-web jicofo jitsi-videobridge jitsi-videobridge2 prosody nginx</span><br><span class="line"></span><br><span class="line">sudo apt-get autoremove</span><br></pre></td></tr></table></figure> 删除全部文件的方法：使用<code>find \ -name jitsi*</code>来查找全部的文件，然后删除。</p></li>
<li><p>nginx启动失败 检查是否是nginx和video-bridge使用的端口的冲突问题，video-bridge先检查443端口，如果被占用则使用4443端口，所以正常启动需要先启动nginx，然后再启动video-bridge，如果是端口占用的问题，先关闭然后再按照顺序启动就可以来。</p></li>
<li><p>配置文件找不到</p></li>
</ol>
<p>可以通过复制<code>/usr/share/jitsi-meet-web-config/jitsi-meet.example</code>到<code>/etc/nginx/conf.d/jitsi-meet-ip.conf</code>，并修改配置文件的内容来完成。 修改内容： - 修改<code>ssl_protocols</code>的值为 <code>TLSv1.1和TLSv1.2</code> - 将配置文件中出现的<code>jitsi-meet.example.com</code>修改为ip地址，下面以<code>111.111.111.111</code>为例，包括<code>ssl_certificate，ssl_certificate_key</code>的值。</p>
]]></content>
  </entry>
  <entry>
    <title>记录librosa 安装的一个问题</title>
    <url>/2020/08/30/librosa0-7-numba0-50-error/</url>
    <content><![CDATA[<p>librosa和numba冲突导致到安装问题和和解决办法。</p>
<p><a id="more"></a></p>
<h2 id="librosa-使用了numba中修改的一个接口">librosa 使用了numba中修改的一个接口</h2>
<h3 id="具体的问题">具体的问题：</h3>
<p>librosa 安装中出现依赖性错误。numba更改了接口，但是librosa没有限制使用指定版本的numba，导致安装了新版的numba。</p>
<h4 id="出现问题版本记录">出现问题版本记录：</h4>
<p>librosa == 0.60 numba == 0.50.1</p>
<p>在命令行中使用下面的命令：<code>python -c "import librosa"</code> 出现下面报错信息：</p>
<p><img src="https://gitee.com/chenryi/image_for_notes/raw/master/librosa-numba-fixed.png" alt="报错信息" /> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;C:\Users\chenr\Anaconda3\lib\site-packages\librosa\__init__.py&quot;, line 12, in &lt;module&gt;</span><br><span class="line">    from . import core</span><br><span class="line">  File &quot;C:\Users\chenr\Anaconda3\lib\site-packages\librosa\core\__init__.py&quot;, line 109, in &lt;module&gt;</span><br><span class="line">    from .time_frequency import *  # pylint: disable&#x3D;wildcard-import</span><br><span class="line">  File &quot;C:\Users\chenr\Anaconda3\lib\site-packages\librosa\core\time_frequency.py&quot;, line 10, in &lt;module&gt;</span><br><span class="line">    from ..util.exceptions import ParameterError</span><br><span class="line">  File &quot;C:\Users\chenr\Anaconda3\lib\site-packages\librosa\util\__init__.py&quot;, line 71, in &lt;module&gt;</span><br><span class="line">    from . import decorators</span><br><span class="line">    from . import decorators</span><br><span class="line">  File &quot;C:\Users\chenr\Anaconda3\lib\site-packages\librosa\util\decorators.py&quot;, line 9, in &lt;module&gt;</span><br><span class="line">    from numba.decorators import jit as optional_jit</span><br><span class="line">ModuleNotFoundError: No module named &#39;numba.decorators&#39;</span><br></pre></td></tr></table></figure> ### 问题原因： numba在0.49版本之后改变了接口，而librosa包没有严格限制numba的版本号 ### 解决办法 在github中有人已经提出这个问题，并且已经做出了修改，应该在librosa的0.8.0中改正了这个问题（没有测试）。<code>decorators.py</code>在0.8.0版本中删除了<code>optional_jit</code>的依赖。</p>
<h3 id="临时的解决办法如下">临时的解决办法如下：</h3>
<p>如果不想更新版本来解决问题，参考github中给出的issure的解决办法：<a href="https://github.com/bshall/librosa/commit/029dd47fd717073de877508db910155f0a384442">commit</a></p>
<p>1.打开 <code>&lt;envs&gt;/Lib/site-packages/librosa/util/decorator.py</code>文件， <code>&lt;envs&gt;</code>是librosa包所在环境的路径。 2. 将<code>decorator.py</code>的包导入修改为如下所示 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># from numba.decorators import jit as optional_jit</span><br><span class="line">import numba</span><br><span class="line">if (numba.__version__ &lt; &#39;0.49.0&#39;):</span><br><span class="line">    from numba.decorators import jit as optional_jit</span><br><span class="line">else:</span><br><span class="line">    from numba.core.decorators import jit as optional_jit</span><br></pre></td></tr></table></figure> <img src="https://gitee.com/chenryi/image_for_notes/raw/master/librosa-numba-fixed.png" alt="改正成功" /></p>
]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
</search>
